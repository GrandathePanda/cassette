!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@cassette/core"),require("@cassette/components")):"function"==typeof define&&define.amd?define(["react","@cassette/core","@cassette/components"],t):"object"==typeof exports?exports.cassettePlayer=t(require("react"),require("@cassette/core"),require("@cassette/components")):e.cassettePlayer=t(e.React,e.cassetteCore,e.cassetteComponents)}("undefined"!=typeof self?self:this,function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=14)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13c2.75-.63 5.26-1.89 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z",key:0}),r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M14 18v12h8l10 10V8L22 18h-8z",key:0}),r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z",key:0}),r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z",key:0}),r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8zm-8-4V18h-2l-4 2v2h3v8h3z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){var r=n(0);function a(e){return r.createElement("svg",e,[r.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),r.createElement("path",{d:"M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1),s=n(2);var l=function(e){return e?e.displayText?e.displayText:e.title&&e.artist?`${e.artist} - ${e.title}`:e.title||e.artist||e.album||"":""};function i(e){return e&&"object"==typeof e?Object.keys(e).filter(t=>e[t]).join(" "):e}var c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(i).filter(Boolean).join(" ")};function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=Object(r.forwardRef)((e,t)=>{let n=e.className,r=e.children,o=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["className","children"]);return a.a.createElement("div",u({ref:t,className:c("cassette__media_button_wrapper",n)},o),r)});var m=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.paused,n=e.awaitingResumeOnSeekComplete,r=e.activeTrackIndex,o=e.onTogglePause,s=e.onSelectTrackIndex,l=e.trackIndex,i=void 0===l?r:l,u=r===i;return a.a.createElement(d,null,a.a.createElement("button",{type:"button",className:c("cassette__play_pause_button cassette__media_button",{playing:u&&(!t||n)}),onClick:u?o:()=>s(i)},a.a.createElement("div",{className:"foreground"},a.a.createElement("div",{className:"left"}),a.a.createElement("div",{className:"right"}))))}},["paused","awaitingResumeOnSeekComplete","activeTrackIndex","onTogglePause","onSelectTrackIndex"]);var p=class extends r.PureComponent{render(){const e=this.props,t=e.back,n=e.onClick;return a.a.createElement(d,null,a.a.createElement("button",{type:"button",className:c("cassette__skip_button cassette__media_button",{back:t}),onClick:n},a.a.createElement("div",{className:"skip_button_inner foreground"},a.a.createElement("div",{className:"right_facing_triangle"}),a.a.createElement("div",{className:"right_facing_triangle"}),a.a.createElement("div",{className:"vertical_bar"}))))}};var h=Object(o.playerContextFilter)(class extends r.PureComponent{render(){return a.a.createElement(p,{back:!0,onClick:this.props.onBackSkip})}},["onBackSkip"]);var f=Object(o.playerContextFilter)(class extends r.PureComponent{render(){return a.a.createElement(p,{onClick:this.props.onForwardSkip})}},["onForwardSkip"]),v=n(3),g=n.n(v),y=n(4),_=n.n(y),b=n(5),E=n.n(b),x=n(6),P=n.n(x);var C=function(e,t){return t?g.a:0===e?_.a:e<=.5?E.a:P.a};var k=function(e){switch(e){case"rightabove":case"rightbelow":return"right";case"hiddenup":case"upabove":default:return"up"}};var M=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()};const T={touchAction:"none"};var w=Object(o.playerContextFilter)(class extends r.PureComponent{static getDerivedStateFromProps(e,t){const n=t.hover;return!t.volumeBarPosition||n||e.setVolumeInProgress?null:{volumeBarPosition:null}}constructor(e){super(e),this.state={hover:!1,volumeBarPosition:null},this.volumeControlRef=null,this.muteToggleRef=null,this.volumeBarContainerRef=null,this.setVolumeControlRef=this.setVolumeControlRef.bind(this),this.setMuteToggleRef=this.setMuteToggleRef.bind(this),this.setVolumeBarContainerRef=this.setVolumeBarContainerRef.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleMuteToggleTouchStart=this.handleMuteToggleTouchStart.bind(this)}componentDidMount(){this.muteToggleRef.addEventListener("touchstart",this.handleMuteToggleTouchStart),document.addEventListener("touchstart",this.handleMouseLeave)}componentDidUpdate(){const e=this.state.volumeBarPosition;if("hiddenup"===e||"hiddenright"===e){const t=this.volumeControlRef.getBoundingClientRect(),n=t.top,r=this.volumeBarContainerRef.offsetHeight;let a;a="hiddenup"===e?r<=n?"upabove":"hiddenright":r<=n?"rightabove":r<=document.documentElement.clientHeight-t.bottom?"rightbelow":null,this.setState({volumeBarPosition:a})}}componentWillUnmount(){this.muteToggleRef.removeEventListener("touchstart",this.handleMuteToggleTouchStart),document.removeEventListener("touchstart",this.handleMouseLeave)}setVolumeControlRef(e){this.volumeControlRef=e}setMuteToggleRef(e){this.muteToggleRef=e}setVolumeBarContainerRef(e){this.volumeBarContainerRef=e}handleMouseEnter(){this.setState({hover:!0,volumeBarPosition:this.state.volumeBarPosition||"hiddenup"})}handleMouseLeave(){this.setState({hover:!1,volumeBarPosition:this.props.setVolumeInProgress?this.state.volumeBarPosition:null})}handleMuteToggleTouchStart(e){this.state.hover||(e.preventDefault(),this.handleMouseEnter())}renderHandle(){return a.a.createElement("div",{className:c("handle",{highlight:this.props.setVolumeInProgress})},a.a.createElement("div",null))}render(){const e=this.props,t=e.volume,n=e.muted,r=e.onSetVolume,o=e.onSetVolumeComplete,l=e.onToggleMuted,i=this.state,u=i.hover,m=i.volumeBarPosition,p=C(t,n);return a.a.createElement(d,{ref:this.setVolumeControlRef,className:"cassette__volume_control",style:T,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTouchStart:M},a.a.createElement("button",{ref:this.setMuteToggleRef,type:"button",className:c("cassette__material_toggle cassette__media_button cassette__mute_btn",{highlight:u,on:!n}),onClick:l},a.a.createElement("div",{className:"foreground inner"},a.a.createElement(p,{width:"100%",height:"100%"}))),a.a.createElement("div",{hidden:!m,ref:this.setVolumeBarContainerRef,className:c("cassette__volume_control__volume_bar_container",m)},a.a.createElement(s.ProgressBar,{className:c("cassette__volume_control__volume_bar",m),progressClassName:"volume",progress:n?0:t,progressDirection:k(m),handle:this.renderHandle(),onAdjustProgress:r,onAdjustComplete:o})))}},["volume","muted","setVolumeInProgress","onSetVolume","onSetVolumeComplete","onToggleMuted"]);var S=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.volume,n=e.muted,r=e.onToggleMuted,o=C(t,n);return a.a.createElement(d,null,a.a.createElement("button",{type:"button",className:c("cassette__material_toggle cassette__media_button cassette__mute_btn",{on:!n}),onClick:r},a.a.createElement("div",{className:"foreground inner"},a.a.createElement(o,{width:"100%",height:"100%"}))))}},["volume","muted","onToggleMuted"]),N=n(7),V=n.n(N),B=n(8),O=n.n(B);var j=Object(o.playerContextFilter)(class extends r.PureComponent{constructor(e){super(e),this.handleNextRepeatStrategy=this.handleNextRepeatStrategy.bind(this)}handleNextRepeatStrategy(){this.props.onSetRepeatStrategy(function(e){let t=o.repeatStrategyOptions.indexOf(e)+1;return t>=o.repeatStrategyOptions.length&&(t=0),o.repeatStrategyOptions[t]}(this.props.repeatStrategy))}render(){const e=this.props.repeatStrategy,t="track"===e?O.a:V.a;return a.a.createElement(d,null,a.a.createElement("button",{type:"button",className:c("cassette__material_toggle cassette__media_button cassette__repeat_btn",{on:"none"!==e}),onClick:this.handleNextRepeatStrategy},a.a.createElement("div",{className:"inner foreground"},a.a.createElement(t,{width:"100%",height:"100%"}))))}},["repeatStrategy","onSetRepeatStrategy"]),z=n(9),R=n.n(z);var H=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.shuffle,n=e.onToggleShuffle;return a.a.createElement(d,null,a.a.createElement("button",{type:"button",className:c("cassette__material_toggle cassette__media_button cassette__shuffle_btn",{on:t}),onClick:n},a.a.createElement("div",{className:"inner foreground"},a.a.createElement(R.a,{width:"100%",height:"100%"}))))}},["shuffle","onToggleShuffle"]);var F=class extends r.PureComponent{render(){const e=this.props,t=e.style,n=e.displayText,r=e.displayTime;return a.a.createElement("div",{className:"cassette__media_status_bar",style:t},a.a.createElement("div",{className:"cassette__media_info_marquee"},a.a.createElement(s.MaybeMarquee,{content:n})),a.a.createElement("div",{className:"cassette__media_time_progress"},r))}};var L=function(e){const t=Math.floor(e/60),n=(e%60).toFixed();return`${t<10?"0":""}${t}:${n<10?"0":""}${n}`};const D={pointerEvents:"none"};var I=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.playlist,n=e.activeTrackIndex,r=e.currentTime,o=e.seekPreviewTime,i=e.seekInProgress,c=e.duration,u=i?o:r;return a.a.createElement("div",{className:"cassette__media_progress_container"},a.a.createElement(s.MediaProgressBar,{className:"cassette__media_progress_bar",progressClassName:"progress",progressDirection:"right"}),a.a.createElement(F,{style:D,displayText:l(t[n])||"",displayTime:`${L(u)} / ${L(c)}`}))}},["playlist","activeTrackIndex","currentTime","seekPreviewTime","seekInProgress","duration"]);var q=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.playlist,n=e.activeTrackIndex,r=e.currentTime,o=e.duration;return a.a.createElement("div",{className:"cassette__media_progress_container"},a.a.createElement(s.MediaProgressBarDisplay,{className:"cassette__media_progress_bar",progressClassName:"progress",progressDirection:"right"}),a.a.createElement(F,{displayText:l(t[n])||"",displayTime:`${L(r)} / ${L(o)}`}))}},["playlist","activeTrackIndex","currentTime","duration"]),$=n(10),K=n.n($),A=n(11),U=n.n(A);var W=Object(o.playerContextFilter)(class extends r.PureComponent{render(){const e=this.props,t=e.fullscreen,n=e.requestFullscreen,r=e.requestExitFullscreen,o=t?U.a:K.a;return a.a.createElement(d,null,a.a.createElement("button",{type:"button",className:c("cassette__material_toggle cassette__media_button cassette__fullscreen_btn",{on:t}),onClick:t?r:n},a.a.createElement("div",{className:"inner foreground"},a.a.createElement(o,{width:"100%",height:"100%"}))))}},["fullscreen","requestFullscreen","requestExitFullscreen"]);var G=class extends r.PureComponent{render(){return a.a.createElement(d,null,a.a.createElement("div",{className:"cassette__spacer"}))}};const J={playpause:m,backskip:h,forwardskip:f,volume:w,mute:S,repeat:j,shuffle:H,progress:I,progressdisplay:q,fullscreen:W,spacer:G},Q={};var X=function(e){if("function"==typeof e)return e;if("string"==typeof e){if(Q[e])return Q[e];const t=J[e];if(t){const n=()=>Object(r.createElement)(t);return Q[e]=n,n}}return null};n(12);let Y=0;class Z extends r.Component{getKeyedChildren(e){this.controlKeys=this.controlKeys||new Map;const t=new Map;return e.map(e=>{if(!e)return e;const n=e.type||e.nodeName||e.tag||"",r=t.get(n)||0;t.set(n,r+1);const o=this.controlKeys.get(n)||[];let s;return o[r]?s=o[r]:(s=(Y++).toString(),this.controlKeys.set(n,o.concat(s))),a.a.cloneElement(e,{key:s})})}render(){const e=this.props,t=e.getDisplayText,n=e.controls,r=e.showVideo,s=e.renderVideoDisplay;return a.a.createElement(o.FullscreenContextConsumer,null,e=>a.a.createElement(o.PlayerContextConsumer,null,o=>a.a.createElement("div",{className:"cassette"},r&&s(o,e),a.a.createElement("div",{className:"cassette__control_bar",title:t(o.playlist[o.activeTrackIndex])},this.getKeyedChildren(n.map(t=>{const n=X(t);return n&&n(o,e)}))))))}}Z.defaultProps={controls:["spacer","backskip","playpause","forwardskip","spacer","progress"],getDisplayText:l,showVideo:!1,renderVideoDisplay:(e,t)=>a.a.createElement(s.VideoDisplay,{className:"cassette__video_display_container",onClick:e.onTogglePause})};var ee=Z;function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ne extends r.Component{render(){const e=this.props,t=e.getDisplayText,n=e.controls,r=e.showVideo,s=e.renderVideoDisplay,l=e.fullscreenEnabled,i=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["getDisplayText","controls","showVideo","renderVideoDisplay","fullscreenEnabled"]);return a.a.createElement(o.FullscreenContextProvider,{fullscreenEnabled:l},a.a.createElement(o.PlayerContextProvider,i,a.a.createElement(ee,{getDisplayText:t,controls:n,showVideo:r,renderVideoDisplay:s})))}}delete ne.propTypes.children,ne.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){te(e,t,n[t])})}return e}({},o.PlayerContextProvider.defaultProps,ee.defaultProps,o.FullscreenContextProvider.defaultProps),delete ne.defaultProps.children;var re=ne;n.d(t,"MediaPlayer",function(){return re}),n.d(t,"MediaPlayerControls",function(){return ee}),n.d(t,"PlayPauseButton",function(){return m}),n.d(t,"BackSkipButton",function(){return h}),n.d(t,"ForwardSkipButton",function(){return f}),n.d(t,"VolumeControl",function(){return w}),n.d(t,"MuteButton",function(){return S}),n.d(t,"RepeatButton",function(){return j}),n.d(t,"ShuffleButton",function(){return H}),n.d(t,"FullscreenButton",function(){return W}),n.d(t,"MediaProgress",function(){return I}),n.d(t,"MediaProgressDisplay",function(){return q}),n.d(t,"Spacer",function(){return G})}])});
//# sourceMappingURL=cassette-player.min.js.map