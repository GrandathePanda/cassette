!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("prop-types"),require("react"),require("@cassette/core"),require("resize-observer-polyfill")):"function"==typeof define&&define.amd?define(["prop-types","react","@cassette/core","resize-observer-polyfill"],t):"object"==typeof exports?exports.cassetteComponents=t(require("prop-types"),require("react"),require("@cassette/core"),require("resize-observer-polyfill")):e.cassetteComponents=t(e.PropTypes,e.React,e.cassetteCore,e.ResizeObserver)}("undefined"!=typeof self?self:this,function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=4)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(0),s=n.n(i),a=n(3),l=n.n(a);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};function h(e){return e+"px"}var f=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={contentHeight:0},n.moveMarquee=n.moveMarquee.bind(p(n)),n.handleResize=n.handleResize.bind(p(n)),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){this.animationFrameRequest=requestAnimationFrame(this.moveMarquee),this.marqueeContainerElementWidth=getComputedStyle(this.marqueeContainerElement).width;var e=getComputedStyle(this.movingContentContainerElement);this.movingContentContainerElementWidth=e.width,this.setState({contentHeight:e.height}),this.resizeObserver=new l.a(this.handleResize),this.resizeObserver.observe(this.marqueeContainerElement),this.resizeObserver.observe(this.movingContentContainerElement),this.lastMovementTime=d()},n.componentWillUnmount=function(){cancelAnimationFrame(this.animationFrameRequest),this.resizeObserver.disconnect()},n.moveMarquee=function(){var e=this.props,t=e.pixelsPerSecond,n=e.scrollDirection,r=d(),o=r-this.lastMovementTime;if(this.lastMovementTime=r,"left"===n?this.movingContentContainerElement.style.right=void 0:this.movingContentContainerElement.style.left=void 0,this.marqueeContainerElementWidth>=this.movingContentContainerElementWidth)this.movingContentContainerElement.style[n]=0;else{var i=t*o/1e3,s=function(e){return Number(e.slice(0,-2))}(this.movingContentContainerElement.style[n])-i;s>0-this.movingContentContainerElementWidth?this.movingContentContainerElement.style[n]=h(s):this.movingContentContainerElement.style[n]=h(this.marqueeContainerElementWidth)}this.animationFrameRequest=requestAnimationFrame(this.moveMarquee)},n.handleResize=function(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(r>=t.length)break;o=t[r++]}else{if((r=t.next()).done)break;o=r.value}var i=o;i.target===this.marqueeContainerElement&&(this.marqueeContainerElementWidth=i.contentRect.width),i.target===this.movingContentContainerElement&&(this.movingContentContainerElementWidth=i.contentRect.width,this.setState({contentHeight:i.contentRect.height}))}},n.render=function(){var e=this,t=this.props,n=t.content,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,["content"]);return delete r.pixelsPerSecond,delete r.scrollDirection,o.a.createElement("div",c({},r,{ref:function(t){return e.marqueeContainerElement=t},style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}({position:"relative",overflow:"hidden",height:this.state.contentHeight},r.style||{})}),o.a.createElement("div",{ref:function(t){return e.movingContentContainerElement=t},style:{position:"absolute",whiteSpace:"nowrap"}},n))},t}(r.PureComponent);f.propTypes={content:s.a.node.isRequired,pixelsPerSecond:s.a.number.isRequired,scrollDirection:s.a.oneOf(["left","right"]).isRequired},f.defaultProps={pixelsPerSecond:30,scrollDirection:"left"};var m=f,g=n(2);var y=function(e,t){var n=100*(1-(e||0))+"%",r={position:"absolute",left:0,right:0,top:0,bottom:0};switch(t){case"left":r.left=n,r.willChange="left";break;case"right":r.right=n,r.willChange="right";break;case"up":r.top=n,r.willChange="top";break;case"down":r.bottom=n,r.willChange="bottom"}return r};var v=function(e,t){var n=100*(e||0)+"%",r={position:"absolute",transform:"translate(-50%, -50%)"};switch(t){case"left":r.top="50%",r.right=n,r.willChange="right",r.transform="translate(50%, -50%)";break;case"right":r.top="50%",r.left=n,r.willChange="left",r.transform="translate(-50%, -50%)";break;case"up":r.left="50%",r.bottom=n,r.willChange="bottom",r.transform="translate(-50%, 50%)";break;case"down":r.left="50%",r.top=n,r.willChange="top",r.transform="translate(-50%, -50%)"}return r};function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(){return e.apply(this,arguments)||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype.render=function(){var e=this.props,t=e.progressClassName,n=e.progressStyle,r=e.progress,i=e.progressDirection,s=e.handle,a=e.progressBarRef,l=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["progressClassName","progressStyle","progress","progressDirection","handle","progressBarRef"]);return o.a.createElement("div",b({},l,{ref:a}),o.a.createElement("div",{style:{position:"relative",width:"100%",height:"100%",touchAction:"none"}},o.a.createElement("div",{className:t,style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){C(e,t,n[t])})}return e}({},y(r,i),n||{})}),s&&o.a.createElement("div",{style:v(r,i)},s)))},t}(r.PureComponent);O.propTypes={progressClassName:s.a.string,progressStyle:s.a.object,progress:s.a.number.isRequired,progressDirection:g.PlayerPropTypes.progressDirection.isRequired,handle:s.a.element};var j=Object(r.forwardRef)(function(e,t){return o.a.createElement(O,b({},e,{progressBarRef:t}))});function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={adjusting:!1},n.progressContainer=null,n.setProgressContainerRef=n.setProgressContainerRef.bind(E(n)),n.handleAdjustProgress=n.handleAdjustProgress.bind(E(n)),n.handleAdjustComplete=n.handleAdjustComplete.bind(E(n)),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;window.addEventListener("mousemove",this.handleAdjustProgress),document.addEventListener("touchmove",this.handleAdjustProgress),window.addEventListener("mouseup",this.handleAdjustComplete),document.addEventListener("touchend",this.handleAdjustComplete),setTimeout(function(){var t=document.createElement("style"),n="noselect_"+Math.random().toString(16).slice(2,7);t.innerText="."+n+"{\ncursor: default;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-touch-callout: none;\n}",document.body.appendChild(t),e.noselectStyleElement=t,e.noselectClassName=n})},n.componentWillUnmount=function(){window.removeEventListener("mousemove",this.handleAdjustProgress),document.removeEventListener("touchmove",this.handleAdjustProgress),window.removeEventListener("mouseup",this.handleAdjustComplete),document.removeEventListener("touchend",this.handleAdjustComplete),this.toggleNoselect(!1),this.noselectStyleElement.parentNode.removeChild(this.noselectStyleElement)},n.setProgressContainerRef=function(e){this.progressContainer=e},n.toggleNoselect=function(e){document.body.classList[e?"add":"remove"](this.noselectClassName)},n.getProgressFromPageCoordinates=function(e,t){var n=this.progressContainer.getBoundingClientRect(),r=n.left,o=n.top,i=n.width,s=n.height,a=document.body,l=a.scrollLeft,c=a.scrollTop;switch(this.props.progressDirection){case"down":return(t-o-c)/s;case"left":return 1-(e-r-l)/i;case"up":return 1-(t-o-c)/s;case"right":default:return(e-r-l)/i}},n.handleAdjustProgress=function(e){var t=this.props,n=t.readonly,r=t.onAdjustProgress,o=this.state.adjusting;if(!n){if("mousedown"===e.type||"touchstart"===e.type)this.toggleNoselect(!0);else if(!o)return;e.preventDefault();var i="touch"===e.type.slice(0,5),s=i?e.targetTouches.item(0).pageX:e.pageX,a=i?e.targetTouches.item(0).pageY:e.pageY,l=this.getProgressFromPageCoordinates(s,a),c=Object(g.convertToNumberWithinIntervalBounds)(l,0,1);this.setState({adjusting:!0}),r(c)}},n.handleAdjustComplete=function(e){var t=this.props.onAdjustComplete;this.toggleNoselect(!1),this.state.adjusting&&(e.preventDefault(),this.setState({adjusting:!1}),t())},n.render=function(){var e=this.props,t=e.progressClassName,n=e.progressStyle,r=e.progress,i=e.progressDirection,s=e.handle,a=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["progressClassName","progressStyle","progress","progressDirection","handle"]);return delete a.readonly,delete a.onAdjustProgress,delete a.onAdjustComplete,o.a.createElement(j,w({},a,{ref:this.setProgressContainerRef,progressClassName:t,progressStyle:n,progress:r,progressDirection:i,handle:s,onMouseDown:this.handleAdjustProgress,onTouchStart:this.handleAdjustProgress}))},t}(r.PureComponent);P.propTypes={progressClassName:s.a.string,progressStyle:s.a.object,progress:s.a.number.isRequired,progressDirection:g.PlayerPropTypes.progressDirection.isRequired,handle:s.a.element,readonly:s.a.bool.isRequired,onAdjustProgress:s.a.func.isRequired,onAdjustComplete:s.a.func.isRequired},P.defaultProps={readonly:!1};var R=P;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var A=function(e){function t(){return e.apply(this,arguments)||this}x(t,e);var n=t.prototype;return n.componentDidMount=function(){this.div.appendChild(this.props.canvas)},n.render=function(){var e=this;return o.a.createElement("div",{style:{width:this.props.containerWidth},ref:function(t){return e.div=t}})},t}(r.Component);A.propTypes={containerWidth:s.a.number,canvas:s.a.instanceOf("undefined"==typeof HTMLCanvasElement?Object:HTMLCanvasElement)};var H=function(e){function t(t){var n;return(n=e.call(this,t)||this).containerWidth=0,n.containerHeight=0,n.hostedVideo=null,n.videoFrameAtTimeLastVacated=null,n}x(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.containerResizeObserver=new l.a(this.handleContainerResize.bind(this)),this.containerResizeObserver.observe(this.containerElement),this.props.registerVideoHostElement(this.containerElement,{onHostOccupied:function(t){t.style.width=e.containerWidth+"px",t.style.maxHeight=e.containerHeight+"px",e.hostedVideo=t,e.forceUpdate()},onHostVacated:function(t){var n=document.createElement("canvas");n.width=t.videoWidth,n.height=t.videoHeight,n.getContext("2d").drawImage(t,0,0,n.width,n.height),n.style.maxWidth="100%",e.videoFrameAtTimeLastVacated=n,e.hostedVideo=null,e.forceUpdate()}}),this.props.renderVideoIntoHostElement(this.containerElement)},n.componentWillUnmount=function(){this.containerResizeObserver.disconnect(),this.props.unregisterVideoHostElement(this.containerElement)},n.handleContainerResize=function(){var e=this.containerElement,t=e.offsetWidth,n=e.offsetHeight;t===this.containerWidth&&n===this.containerHeight||(this.hostedVideo&&(this.hostedVideo.style.width=t+"px",this.hostedVideo.style.maxHeight=n+"px"),this.containerWidth=t,this.containerHeight=n,this.forceUpdate())},n.render=function(){var e=this,t=this.props,n=t.aspectRatio,r=t.fullscreen,i=t.maintainAspectRatioInFullscreen,s=t.renderPlaceholderContent,a=t.renderVideoIntoHostElement,l=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,["aspectRatio","fullscreen","maintainAspectRatioInFullscreen","renderPlaceholderContent","renderVideoIntoHostElement"]);delete l.registerVideoHostElement,delete l.unregisterVideoHostElement;var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){q(e,t,n[t])})}return e}({display:"flex",justifyContent:"center",alignItems:"center",background:"#000"},l.style||{});return n&&this.containerWidth&&(!r||i)&&(c.height&&!this.warnedAboutStyleOverride&&(Object(g.logWarning)("VideoDisplay cannot use style.height prop because it is overridden by aspectRatio."),this.warnedAboutStyleOverride=!0),c.height=this.containerWidth/function(e){var t=e.split(":").map(Number);return t[0]/t[1]}(n)),o.a.createElement("div",S({},l,{style:c,ref:function(t){return e.containerElement=t}}),this.hostedVideo?null:s({containerWidth:this.containerWidth,containerHeight:this.containerHeight,stealVideo:function(){return a(e.containerElement)},renderLastShownFrame:function(){return e.videoFrameAtTimeLastVacated&&o.a.createElement(A,{canvas:e.videoFrameAtTimeLastVacated,containerWidth:e.containerWidth})}}))},t}(r.PureComponent);H.propTypes={registerVideoHostElement:s.a.func.isRequired,renderVideoIntoHostElement:s.a.func.isRequired,unregisterVideoHostElement:s.a.func.isRequired,fullscreen:s.a.bool,aspectRatio:g.PlayerPropTypes.aspectRatio,maintainAspectRatioInFullscreen:s.a.bool.isRequired,renderPlaceholderContent:s.a.func.isRequired},H.defaultProps={aspectRatio:"16:9",maintainAspectRatioInFullscreen:!1,renderPlaceholderContent:function(e){var t=e.containerWidth,n=e.containerHeight,r=e.renderLastShownFrame;return o.a.createElement("div",{style:{width:t,height:n,display:"flex",justifyContent:"center",alignItems:"center"}},r())}};var W=Object(g.playerContextFilter)(H,["registerVideoHostElement","renderVideoIntoHostElement","unregisterVideoHostElement","fullscreen"]);n.d(t,"MaybeMarquee",function(){return m}),n.d(t,"ProgressBar",function(){return R}),n.d(t,"ProgressBarDisplay",function(){return j}),n.d(t,"VideoDisplay",function(){return W})}])});
//# sourceMappingURL=cassette-components.min.js.map