{"version":3,"sources":["webpack://cassetteCore/webpack/universalModuleDefinition","webpack://cassetteCore/webpack/bootstrap","webpack://cassetteCore/external {\"root\":\"PropTypes\",\"commonjs\":\"prop-types\",\"commonjs2\":\"prop-types\",\"amd\":\"prop-types\"}","webpack://cassetteCore/external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://cassetteCore/./src/utils/console.js","webpack://cassetteCore/./src/utils/createSingleGlobalContext.js","webpack://cassetteCore/./node_modules/array-find-index/index.js","webpack://cassetteCore/(webpack)/buildin/global.js","webpack://cassetteCore/./src/PlayerContext.js","webpack://cassetteCore/./src/GroupContext.js","webpack://cassetteCore/./src/constants.js","webpack://cassetteCore/./src/PlayerPropTypes.js","webpack://cassetteCore/./src/factories/createCustomMediaElement.js","webpack://cassetteCore/./src/utils/ShuffleManager.js","webpack://cassetteCore/./src/utils/isPlaylistValid.js","webpack://cassetteCore/./src/utils/getTrackSources.js","webpack://cassetteCore/./src/utils/findTrackIndexByUrl.js","webpack://cassetteCore/./src/utils/snapshot.js","webpack://cassetteCore/./src/utils/getSourceList.js","webpack://cassetteCore/./src/utils/getTimeRangesArray.js","webpack://cassetteCore/./src/utils/getRepeatStrategy.js","webpack://cassetteCore/./src/utils/convertToNumberWithinIntervalBounds.js","webpack://cassetteCore/./src/PlayerContextProvider.js","webpack://cassetteCore/./src/PlayerContextGroup.js","webpack://cassetteCore/./src/FullscreenContext.js","webpack://cassetteCore/./src/FullscreenContextProvider.js","webpack://cassetteCore/./src/playerContextFilter.js","webpack://cassetteCore/./src/index.js"],"names":["log","console","bind","logError","error","logWarning","warn","packageVersion","version","_global","window","global","__cassette_contexts__","createSingleGlobalContext","displayName","defaultValue","ExistingContext","Context","repeatStrategyOptions","requiredOnlyUnlessHasProp","propType","altPropName","warnedAboutDefiningBoth","validate","props","propName","componentName","rest","isRequired","Error","controlKeyword","oneOf","control","oneOfType","func","crossOriginAttribute","mediaSource","shape","src","string","type","mediaSessionAction","mediaSessionArtwork","sizes","url","sources","arrayOf","title","artist","album","artwork","meta","object","progressDirection","seekMode","aspectRatio","prop","undefined","split","length","some","isNaN","loopchange","srcrequest","createCustomMediaElement","media","document","createElement","MutationObserver","dispatchEvent","Event","observe","attributes","attributeFilter","Object","defineProperty","get","currentSrc","set","e","srcRequested","ShuffleManager","constructor","list","options","_list","_forwardStack","_backStack","_currentItem","_allowBackShuffle","Boolean","allowBackShuffle","findNextItem","currentIndex","setCurrentIndex","_findNextItem","findPreviousItem","pickNextItem","index","push","setList","setOptions","o","keys","item","clear","_goForward","n","forwardStack","backStack","currentItem","i","pop","_allItemsMatch","allowMore","indexOf","nextItem","Math","floor","random","isPlaylistValid","playlist","blankSources","getTrackSources","findTrackIndexByUrl","track","source","getStateSnapshot","state","paused","currentTime","activeTrackIndex","volume","muted","loop","cycle","shuffle","playbackRate","__playlist__","__unstable__","activeTrackSrc","restoreStateFromSnapshot","snapshot","restoredStateValues","awaitingPlay","useCurrentTime","newTrackIndex","getSourceList","map","_","getTimeRangesArray","timeRangesObj","timeRangesArray","Array","start","end","getRepeatStrategy","convertToNumberWithinIntervalBounds","number","min","max","Infinity","playErrorHandler","err","name","warningMessage","Date","toLocaleTimeString","supportableMediaSessionActions","defaultState","seekPreviewTime","seekInProgress","awaitingResumeOnSeekComplete","duration","bufferedRanges","playedRanges","seekableRanges","stalled","getGoToTrackState","prevState","shouldPlay","shouldForceLoad","isNewTrack","trackLoading","awaitingForceLoad","setMediaElementSources","mediaElement","firstChild","removeChild","sourceElement","appendChild","load","startingTrackIndex","startingTime","defaultVolume","defaultMuted","defaultRepeatStrategy","defaultShuffle","defaultPlaybackRate","setVolumeInProgress","autoplay","initialStateSnapshot","lastStableVolume","shuffler","videoHostElementList","videoHostOccupiedCallbacks","Map","videoHostVacatedCallbacks","togglePause","selectTrackIndex","forwardSkip","backSkip","seekPreview","seekComplete","setVolume","setVolumeComplete","toggleMuted","toggleShuffle","setRepeatStrategy","setPlaybackRate","registerVideoHostElement","renderVideoIntoHostElement","unregisterVideoHostElement","updateVideoHostElement","handleMediaPlay","handleMediaPause","handleMediaSrcrequest","handleMediaEnded","handleMediaStalled","handleMediaCanplaythrough","handleMediaTimeupdate","handleMediaLoadedmetadata","handleMediaVolumechange","handleMediaDurationchange","handleMediaProgress","handleMediaLoopchange","handleMediaRatechange","componentDidMount","crossOrigin","autoplayDelayInSeconds","mediaElementRef","getPosterImageForTrack","onActiveTrackUpdate","setAttribute","addEventListener","mediaContainer","setState","delayTimeout","setTimeout","getDerivedStateFromProps","nextProps","newPlaylist","baseNewState","prevSources","currentSources","componentDidUpdate","prevProps","newSources","prevTrack","newTrack","stealMediaSession","clearTimeout","snapshotUpdateTimeout","onStateSnapshot","componentWillUnmount","removeEventListener","gapLengthTimeout","MediaSession","navigator","mediaSession","metadata","MediaMetadata","action","supportedMediaSessionActions","seekLength","mediaSessionSeekLengthInSeconds","forEach","handler","setActionHandler","hostElement","onHostOccupied","onHostVacated","concat","cancelAnimationFrame","videoHostUpdateRaf","requestAnimationFrame","filter","elem","delete","parentNode","playing","oldHostElement","play","onVacated","onOccupied","s","loadFirstTrackOnPlaylistComplete","goToTrack","gapLengthInSeconds","played","buffered","seekable","value","pause","playPromise","catch","Promise","reject","args","stayOnBackSkipThreshold","previousItem","targetTime","baseStateUpdate","ended","inProgress","volumeInBounds","repeatStrategy","rate","getControlProps","playerContext","onTogglePause","onSelectTrackIndex","onBackSkip","onForwardSkip","onSeekPreview","onSeekComplete","onSetVolume","onSetVolumeComplete","onToggleMuted","onToggleShuffle","onSetRepeatStrategy","onSetPlaybackRate","key","render","children","propTypes","bool","maintainPlaybackRate","node","defaultProps","groupContext","registerMediaElement","unregisterMediaElement","groupProps","ref","PlayerContextGroupConsumer","enforceOneMediaSourceOnly","mediaElements","element","target","fullscreen","requestFullscreen","requestExitFullscreen","fullscreenStyle","width","height","handleFullscreenChange","fullscreenElement","fullscreenEnabled","webkitRequestFullscreen","mozRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","mozExitFullscreen","documentFullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","getFullscreenContext","fullscreenContext","playerContextFilter","component","contextPropNames","warned","childName","PlayerContextFilter","childProps","hasOwnProperty","PlayerContextConsumer","Consumer","FullscreenContextConsumer"],"mappings":"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","file":"esm/cassette-core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"prop-types\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"prop-types\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cassetteCore\"] = factory(require(\"prop-types\"), require(\"react\"));\n\telse\n\t\troot[\"cassetteCore\"] = factory(root[\"PropTypes\"], root[\"React\"]);\n})((typeof self !== \"undefined\" ? self : this), function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","/* eslint-disable no-console */\n\nconst log = console.log.bind(console);\n\nexport const logError = console.error ? console.error.bind(console) : log;\nexport const logWarning = console.warn ? console.warn.bind(console) : log;\n","import { createContext } from 'react';\n\nimport { logWarning } from './console';\n\nconst packageVersion = require('../../package.json').version;\n\nconst _global = typeof window === 'undefined' ? global : window;\n_global.__cassette_contexts__ = _global.__cassette_contexts__ || {};\n\nfunction createSingleGlobalContext(displayName, defaultValue = null) {\n  const ExistingContext = _global.__cassette_contexts__[displayName];\n  if (ExistingContext) {\n    if (ExistingContext.packageVersion !== packageVersion) {\n      logWarning(\n        `Warning: multiple versions of ${displayName} from the @cassette/core` +\n          ` package have been loaded. v${packageVersion} will be ignored and` +\n          ` v${ExistingContext.packageVersion} will be used instead.`\n      );\n    }\n    return ExistingContext;\n  }\n  const Context = createContext(defaultValue);\n  Context.displayName = displayName;\n  Context.packageVersion = packageVersion;\n  _global.__cassette_contexts__[displayName] = Context;\n  return Context;\n}\n\nexport default createSingleGlobalContext;\n","'use strict';\nmodule.exports = function (arr, predicate, ctx) {\n\tif (typeof Array.prototype.findIndex === 'function') {\n\t\treturn arr.findIndex(predicate, ctx);\n\t}\n\n\tif (typeof predicate !== 'function') {\n\t\tthrow new TypeError('predicate must be a function');\n\t}\n\n\tvar list = Object(arr);\n\tvar len = list.length;\n\n\tif (len === 0) {\n\t\treturn -1;\n\t}\n\n\tfor (var i = 0; i < len; i++) {\n\t\tif (predicate.call(ctx, list[i], i, list)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import createSingleGlobalContext from './utils/createSingleGlobalContext';\n\nexport default createSingleGlobalContext('PlayerContext');\n","import createSingleGlobalContext from './utils/createSingleGlobalContext';\n\nexport default createSingleGlobalContext('GroupContext');\n","export const repeatStrategyOptions = ['none', 'playlist', 'track'];\n","import PropTypes from 'prop-types';\n\nimport { repeatStrategyOptions } from './constants';\nimport { logWarning } from './utils/console';\n\nfunction requiredOnlyUnlessHasProp(propType, altPropName) {\n  let warnedAboutDefiningBoth = false;\n  function validate(props, propName, componentName, ...rest) {\n    if (propName in props) {\n      if (!warnedAboutDefiningBoth && altPropName in props) {\n        logWarning(\n          `Do not define both the '${propName}' and '${altPropName}' props.`\n        );\n        warnedAboutDefiningBoth = true;\n      }\n      return propType.isRequired(props, propName, componentName, ...rest);\n    }\n    if (!(altPropName in props)) {\n      return new Error(\n        `If the '${altPropName}' prop is not defined, '${propName}' must be.`\n      );\n    }\n  }\n  return validate;\n}\n\nexport const controlKeyword = PropTypes.oneOf([\n  'playpause',\n  'backskip',\n  'forwardskip',\n  'volume',\n  'mute',\n  'repeat',\n  'shuffle',\n  'progress',\n  'progressdisplay',\n  'fullscreen',\n  'spacer'\n]);\n\nexport const control = PropTypes.oneOfType([PropTypes.func, controlKeyword]);\n\nexport const crossOriginAttribute = PropTypes.oneOf([\n  'anonymous',\n  'use-credentials'\n]);\n\nexport const repeatStrategy = PropTypes.oneOf(repeatStrategyOptions);\n\nexport const mediaSource = PropTypes.shape({\n  src: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired\n});\n\nexport const mediaSessionAction = PropTypes.oneOf([\n  'play',\n  'pause',\n  'previoustrack',\n  'nexttrack',\n  'seekbackward',\n  'seekforward'\n]);\n\nexport const mediaSessionArtwork = PropTypes.shape({\n  src: PropTypes.string.isRequired,\n  sizes: PropTypes.string,\n  type: PropTypes.string\n});\n\nexport const track = PropTypes.shape({\n  url: requiredOnlyUnlessHasProp(PropTypes.string, 'sources'),\n  sources: requiredOnlyUnlessHasProp(\n    PropTypes.arrayOf(mediaSource.isRequired),\n    'url'\n  ),\n  title: PropTypes.string.isRequired,\n  artist: PropTypes.string,\n  album: PropTypes.string,\n  artwork: PropTypes.arrayOf(mediaSessionArtwork.isRequired),\n  meta: PropTypes.object\n});\n\nexport const progressDirection = PropTypes.oneOf([\n  'left',\n  'right',\n  'up',\n  'down'\n]);\n\nexport const seekMode = PropTypes.oneOf(['paused', 'immediate', 'onrelease']);\n\nexport function aspectRatio(props, propName) {\n  const prop = props[propName];\n  if (prop === undefined) {\n    return;\n  }\n  if (\n    typeof prop !== 'string' ||\n    prop.split(':').length !== 2 ||\n    prop.split(':').some(isNaN)\n  ) {\n    return new Error(\n      `The ${propName} prop should be a string of the form 'x:y'. Example: 16:9`\n    );\n  }\n}\n","const loopchange = 'loopchange';\nconst srcrequest = 'srcrequest';\n\nfunction createCustomMediaElement() {\n  const media = document.createElement('video');\n  new MutationObserver(() => {\n    media.dispatchEvent(new Event(loopchange));\n  }).observe(media, {\n    attributes: true,\n    attributeFilter: ['loop']\n  });\n  // Don't let the media src property get modified directly.\n  // Instead, when it does get set, dispatch an event to be\n  // handled in a way that doesn't conflict with the loaded\n  // playlist.\n  Object.defineProperty(media, 'src', {\n    get: () => media.currentSrc,\n    set: src => {\n      const e = new Event(srcrequest);\n      e.srcRequested = src;\n      media.dispatchEvent(e);\n    }\n  });\n  return media;\n}\n\nexport default createCustomMediaElement;\n","/* ShuffleManager\n *\n * Manages navigation throughout a list which is:\n * - Sourced from another provided list\n * - In random order (except to avoid consecutive duplicates)\n * - Extended endlessly on-the-fly, as needed\n * - Able to have future history overwritten by non-random choices\n * - Able to swap source lists and maintain shuffle order for common members\n */\n\nexport class ShuffleManager {\n  constructor(list, options = {}) {\n    this._list = list;\n    this._forwardStack = [];\n    this._backStack = [];\n    this._currentItem = undefined;\n\n    this._allowBackShuffle = Boolean(options.allowBackShuffle);\n  }\n\n  findNextItem(currentIndex) {\n    if (currentIndex !== undefined) {\n      this.setCurrentIndex(currentIndex);\n    }\n    this._currentItem = _findNextItem(\n      this._list,\n      this._forwardStack,\n      this._backStack,\n      this._currentItem,\n      true\n    );\n    return this._currentItem;\n  }\n\n  findPreviousItem(currentIndex) {\n    if (currentIndex !== undefined) {\n      this.setCurrentIndex(currentIndex);\n    }\n    this._currentItem = _findNextItem(\n      this._list,\n      this._backStack,\n      this._forwardStack,\n      this._currentItem,\n      this._allowBackShuffle\n    );\n    return this._currentItem;\n  }\n\n  pickNextItem(index, currentIndex) {\n    if (currentIndex !== undefined) {\n      this.setCurrentIndex(currentIndex);\n    }\n    if (this._list[index] === undefined) {\n      return undefined;\n    }\n    if (this._currentItem !== undefined) {\n      this._backStack.push(this._currentItem);\n    }\n    this._forwardStack.length = 0;\n    this._currentItem = this._list[index];\n    return this._currentItem;\n  }\n\n  setList(list) {\n    this._list = list;\n  }\n\n  setOptions(options) {\n    for (const o of Object.keys(options)) {\n      switch (o) {\n        case 'allowBackShuffle':\n          this[`_${o}`] = Boolean(options[o]);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  setCurrentIndex(currentIndex) {\n    const item = this._list[currentIndex];\n    if (this._currentItem !== item) {\n      this.clear();\n      this._currentItem = item;\n    }\n  }\n\n  clear() {\n    this._forwardStack.length = 0;\n    this._backStack.length = 0;\n    this._currentItem = undefined;\n  }\n}\n\nfunction _goForward(n, forwardStack, backStack, currentItem) {\n  let item = currentItem;\n  for (let i = 0; i < n; i++) {\n    if (!forwardStack.length) {\n      // rollback before erroring (note stack reversal)\n      _goForward(i, backStack, forwardStack, item);\n      throw `Moving ${n} places was not possible!`;\n    }\n    backStack.push(item);\n    item = forwardStack.pop();\n  }\n  return item;\n}\n\nfunction _allItemsMatch(list, item) {\n  if (!list.length) {\n    return false;\n  }\n  for (let i = 0; i < list.length; i++) {\n    if (item !== list[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction _findNextItem(list, forwardStack, backStack, currentItem, allowMore) {\n  let item = currentItem;\n  if (!list.length) {\n    return undefined;\n  }\n  for (let i = 1; i <= forwardStack.length; i++) {\n    if (list.indexOf(forwardStack[forwardStack.length - i]) !== -1) {\n      return _goForward(i, forwardStack, backStack, item);\n    }\n  }\n  if (!allowMore) {\n    return undefined;\n  }\n  if (_allItemsMatch(list, item)) {\n    // we can serve this as our \"next\" item but we\n    // won't modify our history since it's the same.\n    return item;\n  }\n  let nextItem;\n  do {\n    nextItem = list[Math.floor(Math.random() * list.length)];\n  } while (item === nextItem || nextItem === undefined);\n  // if we're skipping items that aren't in our current list we may\n  // have some items in our forwardStack - make sure we move to the front.\n  item = _goForward(forwardStack.length, forwardStack, backStack, item);\n  if (item !== undefined) {\n    backStack.push(item);\n  }\n  return nextItem;\n}\n\nexport default ShuffleManager;\n","function isPlaylistValid(playlist) {\n  return Boolean(playlist && playlist.length);\n}\n\nexport default isPlaylistValid;\n","import isPlaylistValid from './isPlaylistValid';\n\nconst blankSources = [{ src: '' }];\n\nfunction getTrackSources(playlist, index) {\n  if (!isPlaylistValid(playlist)) {\n    return blankSources;\n  }\n  const { sources, url } = playlist[index];\n  if (sources) {\n    return sources.length ? sources : blankSources;\n  }\n  return [{ src: url }];\n}\n\nexport default getTrackSources;\n","import arrayFindIndex from 'array-find-index';\n\nfunction findTrackIndexByUrl(playlist, url) {\n  return arrayFindIndex(playlist, track => {\n    if (track.sources) {\n      return arrayFindIndex(track.sources, source => source.src === url) !== -1;\n    }\n    return track.url && url === track.url;\n  });\n}\n\nexport default findTrackIndexByUrl;\n","import isPlaylistValid from './isPlaylistValid';\nimport getTrackSources from './getTrackSources';\nimport findTrackIndexByUrl from './findTrackIndexByUrl';\n\nexport function getStateSnapshot(state) {\n  const {\n    paused,\n    currentTime,\n    activeTrackIndex,\n    volume,\n    muted,\n    loop,\n    cycle,\n    shuffle,\n    playbackRate,\n    __playlist__\n  } = state;\n  return {\n    __unstable__: {\n      paused,\n      currentTime,\n      activeTrackIndex,\n      volume,\n      muted,\n      loop,\n      cycle,\n      shuffle,\n      playbackRate,\n      activeTrackSrc: isPlaylistValid(__playlist__)\n        ? getTrackSources(__playlist__, activeTrackIndex)[0].src\n        : null\n    }\n  };\n}\n\nexport function restoreStateFromSnapshot(snapshot, props) {\n  const {\n    paused,\n    currentTime,\n    activeTrackIndex,\n    volume,\n    muted,\n    loop,\n    cycle,\n    shuffle,\n    playbackRate,\n    activeTrackSrc\n  } = snapshot.__unstable__;\n  const restoredStateValues = {};\n  if (isPlaylistValid(props.playlist) && typeof paused === 'boolean') {\n    // using awaitingPlay instead of paused triggers an animation\n    restoredStateValues.awaitingPlay = !paused;\n  }\n  if (typeof volume === 'number' && volume >= 0 && volume <= 1) {\n    restoredStateValues.volume = volume;\n  }\n  if (typeof muted === 'boolean') {\n    restoredStateValues.muted = muted;\n  }\n  if (typeof loop === 'boolean') {\n    restoredStateValues.loop = loop;\n  }\n  if (typeof cycle === 'boolean') {\n    restoredStateValues.cycle = cycle;\n  }\n  if (typeof shuffle === 'boolean') {\n    restoredStateValues.shuffle = shuffle;\n  }\n  if (typeof playbackRate === 'number') {\n    restoredStateValues.playbackRate = playbackRate;\n  }\n  let useCurrentTime = false;\n  if (\n    typeof activeTrackSrc === 'string' &&\n    typeof activeTrackIndex === 'number' &&\n    activeTrackIndex >= 0\n  ) {\n    // let's try staying on the same track index\n    const currentSrc =\n      props.playlist[activeTrackIndex] &&\n      getTrackSources(props.playlist, activeTrackIndex)[0].src;\n    if (currentSrc && activeTrackSrc === currentSrc) {\n      restoredStateValues.activeTrackIndex = activeTrackIndex;\n      useCurrentTime = true;\n    } else {\n      /* if the track we were playing before is in the new playlist,\n       * update the activeTrackIndex.\n       */\n      const newTrackIndex = findTrackIndexByUrl(props.playlist, activeTrackSrc);\n      if (newTrackIndex !== -1) {\n        restoredStateValues.activeTrackIndex = newTrackIndex;\n        useCurrentTime = true;\n      }\n    }\n  }\n  if (useCurrentTime && typeof currentTime === 'number' && currentTime >= 0) {\n    restoredStateValues.currentTime = currentTime;\n  }\n  return restoredStateValues;\n}\n","import getTrackSources from './getTrackSources';\n\n// collapses playlist into flat list containing\n// the first source url for each track\nfunction getSourceList(playlist) {\n  return (playlist || []).map((_, i) => getTrackSources(playlist, i)[0].src);\n}\n\nexport default getSourceList;\n","function getTimeRangesArray(timeRangesObj) {\n  const timeRangesArray = Array(timeRangesObj.length);\n  for (let i = 0; i < timeRangesObj.length; i++) {\n    timeRangesArray[i] = {\n      start: timeRangesObj.start(i),\n      end: timeRangesObj.end(i)\n    };\n  }\n  return timeRangesArray;\n}\n\nexport default getTimeRangesArray;\n","function getRepeatStrategy(loop, cycle) {\n  if (loop) {\n    return 'track';\n  }\n  if (cycle) {\n    return 'playlist';\n  }\n  return 'none';\n}\n\nexport default getRepeatStrategy;\n","function convertToNumberWithinIntervalBounds(number, min, max) {\n  min = typeof min === 'number' ? min : -Infinity;\n  max = typeof max === 'number' ? max : Infinity;\n  return Math.max(min, Math.min(number, max));\n}\n\nexport default convertToNumberWithinIntervalBounds;\n","import React, { Component, Fragment, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport arrayFindIndex from 'array-find-index';\n\nimport PlayerContext from './PlayerContext';\nimport GroupContext from './GroupContext';\nimport * as PlayerPropTypes from './PlayerPropTypes';\nimport createCustomMediaElement from './factories/createCustomMediaElement';\nimport ShuffleManager from './utils/ShuffleManager';\nimport { getStateSnapshot, restoreStateFromSnapshot } from './utils/snapshot';\nimport getSourceList from './utils/getSourceList';\nimport getTrackSources from './utils/getTrackSources';\nimport getTimeRangesArray from './utils/getTimeRangesArray';\nimport findTrackIndexByUrl from './utils/findTrackIndexByUrl';\nimport isPlaylistValid from './utils/isPlaylistValid';\nimport getRepeatStrategy from './utils/getRepeatStrategy';\nimport convertToNumberWithinIntervalBounds from './utils/convertToNumberWithinIntervalBounds';\nimport { logError, logWarning } from './utils/console';\nimport { repeatStrategyOptions } from './constants';\n\nfunction playErrorHandler(err) {\n  logError(err);\n  if (err.name === 'NotAllowedError') {\n    const warningMessage =\n      'Media playback failed at ' +\n      new Date().toLocaleTimeString() +\n      '! (Perhaps autoplay is disabled in this browser.)';\n    logWarning(warningMessage);\n  }\n}\n\n// Existing Media Session API implementations have default handlers\n// for play/pause, and may yield unexpected behavior if custom\n// play/pause handlers are defined - so let's leave them be.\nconst supportableMediaSessionActions = [\n  'previoustrack',\n  'nexttrack',\n  'seekbackward',\n  'seekforward'\n];\n\nconst defaultState = {\n  // indicates whether media player should be paused\n  paused: true,\n  // elapsed time for active track, in seconds\n  currentTime: 0,\n  // The most recent targeted time, in seconds, for seek preview\n  seekPreviewTime: 0,\n  /* true if the user is currently dragging the mouse\n   * to seek a new track position\n   */\n  seekInProgress: false,\n  /* true if media was playing when seek previewing began,\n   * it was paused, and it should be resumed on seek\n   * complete\n   */\n  awaitingResumeOnSeekComplete: false,\n  // the duration in seconds of the loaded track\n  duration: 0,\n  // array describing the buffered ranges in the loaded track\n  bufferedRanges: [],\n  // array describing the already-played ranges in the loaded track\n  playedRanges: [],\n  // array describing the seekable ranges in the loaded track\n  seekableRanges: [],\n  // true if the media is currently stalled pending data buffering\n  stalled: false,\n  // true if the active track should play on the next componentDidUpdate\n  awaitingPlay: false\n};\n\n// assumes playlist is valid\nfunction getGoToTrackState({\n  prevState,\n  index,\n  shouldPlay = true,\n  shouldForceLoad = false\n}) {\n  const isNewTrack = prevState.activeTrackIndex !== index;\n  return {\n    activeTrackIndex: index,\n    trackLoading: isNewTrack,\n    currentTime: 0,\n    loop: isNewTrack || shouldForceLoad ? false : prevState.loop,\n    awaitingPlay: Boolean(shouldPlay),\n    paused: !shouldPlay,\n    awaitingForceLoad: Boolean(shouldForceLoad)\n  };\n}\n\nfunction setMediaElementSources(mediaElement, sources) {\n  // remove current sources\n  let firstChild;\n  while ((firstChild = mediaElement.firstChild)) {\n    mediaElement.removeChild(firstChild);\n  }\n  // add new sources\n  for (const source of sources) {\n    const sourceElement = document.createElement('source');\n    sourceElement.src = source.src;\n    if (source.type) {\n      sourceElement.type = source.type;\n    }\n    mediaElement.appendChild(sourceElement);\n  }\n  // cancel playback and re-scan new sources\n  mediaElement.load();\n}\n\n/**\n * Wraps an area which shares a common [`playerContext`](#playercontext)\n */\nexport class PlayerContextProvider extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      ...defaultState,\n      // index matching requested track (whether track has loaded or not)\n      activeTrackIndex: convertToNumberWithinIntervalBounds(\n        props.startingTrackIndex,\n        0\n      ),\n      // whether we're waiting on loading metadata for the active track\n      trackLoading: isPlaylistValid(props.playlist),\n      // the current timestamp on the active track in seconds\n      currentTime: convertToNumberWithinIntervalBounds(props.startingTime, 0),\n      // the latest volume of the media, between 0 and 1.\n      volume: convertToNumberWithinIntervalBounds(props.defaultVolume, 0, 1),\n      // true if the media has been muted\n      muted: props.defaultMuted,\n      // whether to loop the active track\n      loop: props.defaultRepeatStrategy === 'track',\n      // true if playlist should continue at start after completion\n      cycle: props.defaultRepeatStrategy === 'playlist',\n      // whether to randomly pick next track from playlist after one finishes\n      shuffle: props.defaultShuffle,\n      // Rate at which media should be played. 1.0 is normal speed.\n      playbackRate: props.defaultPlaybackRate,\n      // true if user is currently dragging mouse to change the volume\n      setVolumeInProgress: false,\n      // initialize awaitingPlay from autoplay prop\n      awaitingPlay: props.autoplay && isPlaylistValid(props.playlist),\n      awaitingForceLoad: false,\n      // playlist prop copied to state (for getDerivedStateFromProps)\n      __playlist__: props.playlist,\n      // load overrides from previously-captured state snapshot\n      ...(props.initialStateSnapshot\n        ? restoreStateFromSnapshot(props.initialStateSnapshot, props)\n        : {})\n    };\n\n    // volume at last time we were unmuted and not actively setting volume\n    this.lastStableVolume = this.state.volume;\n\n    // used to keep track of play history when we are shuffling\n    this.shuffler = new ShuffleManager(getSourceList(props.playlist), {\n      allowBackShuffle: props.allowBackShuffle\n    });\n\n    // html media element used for playback\n    this.media = null;\n\n    this.videoHostElementList = [];\n    this.videoHostOccupiedCallbacks = new Map();\n    this.videoHostVacatedCallbacks = new Map();\n\n    // bind callback methods to pass to descendant elements\n    this.togglePause = this.togglePause.bind(this);\n    this.selectTrackIndex = this.selectTrackIndex.bind(this);\n    this.forwardSkip = this.forwardSkip.bind(this);\n    this.backSkip = this.backSkip.bind(this);\n    this.seekPreview = this.seekPreview.bind(this);\n    this.seekComplete = this.seekComplete.bind(this);\n    this.setVolume = this.setVolume.bind(this);\n    this.setVolumeComplete = this.setVolumeComplete.bind(this);\n    this.toggleMuted = this.toggleMuted.bind(this);\n    this.toggleShuffle = this.toggleShuffle.bind(this);\n    this.setRepeatStrategy = this.setRepeatStrategy.bind(this);\n    this.setPlaybackRate = this.setPlaybackRate.bind(this);\n    this.registerVideoHostElement = this.registerVideoHostElement.bind(this);\n    this.renderVideoIntoHostElement = this.renderVideoIntoHostElement.bind(\n      this\n    );\n    this.unregisterVideoHostElement = this.unregisterVideoHostElement.bind(\n      this\n    );\n    this.updateVideoHostElement = this.updateVideoHostElement.bind(this);\n\n    // bind media event handlers\n    this.handleMediaPlay = this.handleMediaPlay.bind(this);\n    this.handleMediaPause = this.handleMediaPause.bind(this);\n    this.handleMediaSrcrequest = this.handleMediaSrcrequest.bind(this);\n    this.handleMediaEnded = this.handleMediaEnded.bind(this);\n    this.handleMediaStalled = this.handleMediaStalled.bind(this);\n    this.handleMediaCanplaythrough = this.handleMediaCanplaythrough.bind(this);\n    this.handleMediaTimeupdate = this.handleMediaTimeupdate.bind(this);\n    this.handleMediaLoadedmetadata = this.handleMediaLoadedmetadata.bind(this);\n    this.handleMediaVolumechange = this.handleMediaVolumechange.bind(this);\n    this.handleMediaDurationchange = this.handleMediaDurationchange.bind(this);\n    this.handleMediaProgress = this.handleMediaProgress.bind(this);\n    this.handleMediaLoopchange = this.handleMediaLoopchange.bind(this);\n    this.handleMediaRatechange = this.handleMediaRatechange.bind(this);\n  }\n\n  componentDidMount() {\n    const media = (this.media = createCustomMediaElement());\n\n    const {\n      defaultPlaybackRate,\n      crossOrigin,\n      playlist,\n      autoplayDelayInSeconds,\n      mediaElementRef,\n      getPosterImageForTrack,\n      onActiveTrackUpdate\n    } = this.props;\n    const {\n      volume,\n      muted,\n      playbackRate,\n      loop,\n      activeTrackIndex,\n      awaitingPlay\n    } = this.state;\n\n    // initialize media properties\n    // We used to set currentTime here.. now waiting for loadedmetadata.\n    // This avoids an issue where some browsers ignore or delay currentTime\n    // updates when in the HAVE_NOTHING state.\n    media.defaultPlaybackRate = defaultPlaybackRate;\n    media.crossOrigin = crossOrigin;\n    media.volume = volume;\n    media.muted = muted;\n    media.playbackRate = playbackRate;\n    media.loop = loop;\n    media.setAttribute('playsinline', '');\n    media.setAttribute('webkit-playsinline', '');\n    media.setAttribute('preload', 'metadata');\n    media.setAttribute(\n      'poster',\n      getPosterImageForTrack(playlist[activeTrackIndex])\n    );\n\n    // add listeners for media events\n    media.addEventListener('play', this.handleMediaPlay);\n    media.addEventListener('pause', this.handleMediaPause);\n    media.addEventListener('ended', this.handleMediaEnded);\n    media.addEventListener('stalled', this.handleMediaStalled);\n    media.addEventListener('canplaythrough', this.handleMediaCanplaythrough);\n    media.addEventListener('timeupdate', this.handleMediaTimeupdate);\n    media.addEventListener('loadedmetadata', this.handleMediaLoadedmetadata);\n    media.addEventListener('volumechange', this.handleMediaVolumechange);\n    media.addEventListener('durationchange', this.handleMediaDurationchange);\n    media.addEventListener('progress', this.handleMediaProgress);\n    media.addEventListener('ratechange', this.handleMediaRatechange);\n    // add listeners for special events\n    media.addEventListener('srcrequest', this.handleMediaSrcrequest);\n    media.addEventListener('loopchange', this.handleMediaLoopchange);\n\n    // set source elements for current track\n    setMediaElementSources(media, getTrackSources(playlist, activeTrackIndex));\n\n    // initially mount media element in the hidden container (this may change)\n    this.mediaContainer.appendChild(media);\n\n    if (awaitingPlay) {\n      this.setState({\n        awaitingPlay: false\n      });\n      this.delayTimeout = setTimeout(() => {\n        this.togglePause(false);\n      }, autoplayDelayInSeconds * 1000);\n    }\n\n    if (mediaElementRef) {\n      mediaElementRef(media);\n    }\n\n    if (onActiveTrackUpdate) {\n      onActiveTrackUpdate(playlist[activeTrackIndex], activeTrackIndex);\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const newPlaylist = nextProps.playlist;\n\n    if (newPlaylist === prevState.__playlist__) {\n      // reference comparison is equal so we'll\n      // assume the playlist is unchanged.\n      return null;\n    }\n\n    const baseNewState = {\n      __playlist__: newPlaylist\n    };\n\n    // check if the new playlist is invalid\n    if (!isPlaylistValid(newPlaylist)) {\n      return {\n        ...defaultState,\n        ...baseNewState,\n        activeTrackIndex: 0,\n        trackLoading: false\n      };\n    }\n\n    // check if the activeTrackIndex doesn't need to be updated\n    const prevSources = getTrackSources(\n      prevState.__playlist__,\n      prevState.activeTrackIndex\n    );\n\n    if (newPlaylist[prevState.activeTrackIndex]) {\n      // the sources if we stay on the same track index\n      const currentSources = getTrackSources(\n        newPlaylist,\n        prevState.activeTrackIndex\n      );\n      // non-comprehensive but probably accurate check\n      if (prevSources[0].src === currentSources[0].src) {\n        // our active track index already matches\n        return baseNewState;\n      }\n    }\n\n    /* if the track we're already playing is in the new playlist, update the\n     * activeTrackIndex.\n     */\n    const newTrackIndex = findTrackIndexByUrl(newPlaylist, prevSources[0].src);\n    if (newTrackIndex !== -1) {\n      return {\n        ...baseNewState,\n        activeTrackIndex: newTrackIndex\n      };\n    }\n\n    // if not, then load the first track in the new playlist, and pause.\n    return {\n      ...baseNewState,\n      ...getGoToTrackState({ prevState, index: 0, shouldPlay: false })\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.media.defaultPlaybackRate = this.props.defaultPlaybackRate;\n    this.media.crossOrigin = this.props.crossOrigin;\n\n    this.shuffler.setList(getSourceList(this.props.playlist));\n    this.shuffler.setOptions({\n      allowBackShuffle: this.props.allowBackShuffle\n    });\n\n    const prevSources = getTrackSources(\n      prevProps.playlist,\n      prevState.activeTrackIndex\n    );\n    const newSources = getTrackSources(\n      this.props.playlist,\n      this.state.activeTrackIndex\n    );\n    const prevTrack = prevProps.playlist[prevState.activeTrackIndex];\n    const newTrack = this.props.playlist[this.state.activeTrackIndex];\n    if (\n      this.state.awaitingForceLoad ||\n      prevSources[0].src !== newSources[0].src\n    ) {\n      setMediaElementSources(this.media, newSources);\n      this.media.setAttribute(\n        'poster',\n        this.props.getPosterImageForTrack(newTrack)\n      );\n      this.setState({\n        awaitingForceLoad: false\n      });\n      if (!this.state.shuffle) {\n        // after toggling off shuffle, we defer clearing the shuffle\n        // history until we actually change tracks - if the user quickly\n        // toggles  shuffle off then back on again, we don't want to have\n        // lost our history.\n        this.shuffler.clear();\n      }\n    }\n\n    if (this.props.onActiveTrackUpdate && prevTrack !== newTrack) {\n      this.props.onActiveTrackUpdate(newTrack, this.state.activeTrackIndex);\n    }\n\n    if (prevProps !== this.props && !this.media.paused) {\n      // update running media session based on new props\n      this.stealMediaSession();\n    }\n\n    if (this.state.awaitingPlay) {\n      this.setState({\n        awaitingPlay: false\n      });\n      // media.currentSrc is updated asynchronously so we should\n      // play async to avoid weird intermediate state issues\n      setTimeout(() => {\n        this.togglePause(false);\n      });\n    }\n\n    clearTimeout(this.snapshotUpdateTimeout);\n    this.snapshotUpdateTimeout = setTimeout(() => {\n      if (this.props.onStateSnapshot) {\n        this.props.onStateSnapshot(getStateSnapshot(this.state));\n      }\n    }, 100);\n  }\n\n  componentWillUnmount() {\n    const { media } = this;\n    // remove listeners for media events\n    media.removeEventListener('play', this.handleMediaPlay);\n    media.removeEventListener('pause', this.handleMediaPause);\n    media.removeEventListener('ended', this.handleMediaEnded);\n    media.removeEventListener('stalled', this.handleMediaStalled);\n    media.removeEventListener('canplaythrough', this.handleMediaCanplaythrough);\n    media.removeEventListener('timeupdate', this.handleMediaTimeupdate);\n    media.removeEventListener('loadedmetadata', this.handleMediaLoadedmetadata);\n    media.removeEventListener('volumechange', this.handleMediaVolumechange);\n    media.removeEventListener('durationchange', this.handleMediaDurationchange);\n    media.removeEventListener('progress', this.handleMediaProgress);\n    media.removeEventListener('ratechange', this.handleMediaRatechange);\n    // remove special event listeners on the media element\n    media.removeEventListener('srcrequest', this.handleMediaSrcrequest);\n    media.removeEventListener('loopchange', this.handleMediaLoopchange);\n\n    clearTimeout(this.gapLengthTimeout);\n    clearTimeout(this.delayTimeout);\n  }\n\n  stealMediaSession() {\n    if (\n      // eslint-disable-next-line no-undef\n      !(window.MediaSession && navigator.mediaSession instanceof MediaSession)\n    ) {\n      return;\n    }\n    // eslint-disable-next-line no-undef\n    navigator.mediaSession.metadata = new MediaMetadata(\n      this.props.playlist[this.state.activeTrackIndex]\n    );\n    supportableMediaSessionActions\n      .map(action => {\n        if (this.props.supportedMediaSessionActions.indexOf(action) === -1) {\n          return null;\n        }\n        const seekLength = this.props.mediaSessionSeekLengthInSeconds;\n        switch (action) {\n          case 'play':\n            return this.togglePause.bind(this, false);\n          case 'pause':\n            return this.togglePause.bind(this, true);\n          case 'previoustrack':\n            return this.backSkip;\n          case 'nexttrack':\n            return this.forwardSkip;\n          case 'seekbackward':\n            return () => (this.media.currentTime -= seekLength);\n          case 'seekforward':\n            return () => (this.media.currentTime += seekLength);\n          default:\n            return undefined;\n        }\n      })\n      .forEach((handler, i) => {\n        navigator.mediaSession.setActionHandler(\n          supportableMediaSessionActions[i],\n          handler\n        );\n      });\n  }\n\n  registerVideoHostElement(hostElement, { onHostOccupied, onHostVacated }) {\n    this.videoHostElementList = this.videoHostElementList.concat(hostElement);\n    this.videoHostOccupiedCallbacks.set(hostElement, onHostOccupied);\n    this.videoHostVacatedCallbacks.set(hostElement, onHostVacated);\n  }\n\n  renderVideoIntoHostElement(hostElement) {\n    if (this.videoHostElementList.indexOf(hostElement) === -1) {\n      return;\n    }\n    cancelAnimationFrame(this.videoHostUpdateRaf);\n    this.videoHostUpdateRaf = requestAnimationFrame(() =>\n      this.updateVideoHostElement(hostElement)\n    );\n  }\n\n  unregisterVideoHostElement(hostElement) {\n    this.videoHostElementList = this.videoHostElementList.filter(\n      elem => elem !== hostElement\n    );\n    this.videoHostOccupiedCallbacks.delete(hostElement);\n    this.videoHostVacatedCallbacks.delete(hostElement);\n    if (this.media.parentNode === hostElement) {\n      this.updateVideoHostElement();\n    }\n  }\n\n  updateVideoHostElement(hostElement) {\n    if (!hostElement) {\n      hostElement = this.videoHostElementList[0] || this.mediaContainer;\n    } else {\n      // move hostElement to front of list\n      this.videoHostElementList = [hostElement].concat(\n        this.videoHostElementList.filter(elem => elem !== hostElement)\n      );\n    }\n    const playing = !this.media.paused;\n    const oldHostElement = this.media.parentNode;\n    if (hostElement === oldHostElement) {\n      return;\n    }\n    hostElement.appendChild(this.media);\n    // according to the HTML spec playback should continue, but\n    // some browsers pause the element whenever it is moved around, so\n    // let's make sure playback resumes if that's the case.\n    if (playing && this.media.paused) {\n      this.media.play();\n    }\n    const onVacated = this.videoHostVacatedCallbacks.get(oldHostElement);\n    if (onVacated) {\n      onVacated(this.media);\n    }\n    const onOccupied = this.videoHostOccupiedCallbacks.get(hostElement);\n    if (onOccupied) {\n      onOccupied(this.media);\n    }\n  }\n\n  handleMediaPlay() {\n    this.setState(state => (state.paused === false ? null : { paused: false }));\n    this.stealMediaSession();\n  }\n\n  handleMediaPause() {\n    this.setState(state => (state.paused === true ? null : { paused: true }));\n  }\n\n  handleMediaSrcrequest(e) {\n    const { playlist } = this.props;\n    const sources = getTrackSources(playlist, this.state.activeTrackIndex);\n    if (arrayFindIndex(sources, s => s.src === e.srcRequested) !== -1) {\n      // we're good! nothing to update.\n      return;\n    }\n    // looks like 'src' was set from outside our component.\n    // let's see if we can use it.\n    const newTrackIndex = findTrackIndexByUrl(playlist, e.srcRequested);\n    if (newTrackIndex === -1) {\n      logError(\n        `Source '${e.srcRequested}' does not exist in the loaded playlist. ` +\n          `Make sure you've updated the 'playlist' prop to ` +\n          `PlayerContextProvider before you select this track!`\n      );\n      return;\n    }\n    this.selectTrackIndex(newTrackIndex);\n  }\n\n  handleMediaEnded() {\n    if (this.state.seekInProgress) {\n      // nothing to do if we're in the middle of a seek\n      // (this can happen if we're in seekMode: immediate)\n      return;\n    }\n    clearTimeout(this.gapLengthTimeout);\n    const { playlist, loadFirstTrackOnPlaylistComplete } = this.props;\n    if (!isPlaylistValid(playlist)) {\n      return;\n    }\n    const { cycle, activeTrackIndex } = this.state;\n    if (!cycle && activeTrackIndex + 1 >= playlist.length) {\n      if (loadFirstTrackOnPlaylistComplete) {\n        this.goToTrack({ index: 0, shouldPlay: false, shouldForceLoad: true });\n      }\n      return;\n    }\n    this.gapLengthTimeout = setTimeout(\n      this.forwardSkip,\n      this.props.gapLengthInSeconds * 1000\n    );\n  }\n\n  handleMediaStalled() {\n    this.setState(state => (state.stalled === true ? null : { stalled: true }));\n  }\n\n  handleMediaCanplaythrough() {\n    this.setState(\n      state => (state.stalled === false ? null : { stalled: false })\n    );\n  }\n\n  handleMediaTimeupdate() {\n    const { currentTime, played } = this.media;\n    if (this.state.trackLoading) {\n      // correct currentTime to preset, if applicable, during load\n      this.media.currentTime = this.state.currentTime;\n      return;\n    }\n    this.setState({\n      currentTime,\n      playedRanges: getTimeRangesArray(played)\n    });\n  }\n\n  handleMediaLoadedmetadata() {\n    if (this.media.currentTime !== this.state.currentTime) {\n      this.media.currentTime = this.state.currentTime;\n    }\n    this.setState(\n      state => (state.trackLoading === false ? null : { trackLoading: false })\n    );\n  }\n\n  handleMediaVolumechange() {\n    const { volume, muted } = this.media;\n    this.setState({ volume, muted });\n  }\n\n  handleMediaDurationchange() {\n    const { duration } = this.media;\n    this.setState({ duration });\n  }\n\n  handleMediaProgress() {\n    this.setState({\n      bufferedRanges: getTimeRangesArray(this.media.buffered),\n      seekableRanges: getTimeRangesArray(this.media.seekable)\n    });\n  }\n\n  handleMediaLoopchange() {\n    const { loop } = this.media;\n    this.setState(state => (state.loop === loop ? null : { loop }));\n  }\n\n  handleMediaRatechange() {\n    const { playbackRate } = this.media;\n    this.setState(\n      state => (state.playbackRate === playbackRate ? null : { playbackRate })\n    );\n  }\n\n  togglePause(value) {\n    clearTimeout(this.delayTimeout);\n    const pause = typeof value === 'boolean' ? value : !this.state.paused;\n    if (pause) {\n      this.media.pause();\n      return;\n    }\n    if (!this.media.currentSrc) {\n      return;\n    }\n    try {\n      const playPromise = this.media.play();\n      if (playPromise && typeof playPromise.catch === 'function') {\n        playPromise\n          .catch(err => {\n            // AbortError is pretty much always called because we're skipping\n            // tracks quickly or hitting pause before a track has a chance to\n            // play. It's pretty safe to just ignore these error messages.\n            if (err.name !== 'AbortError') {\n              return Promise.reject(err);\n            }\n          })\n          .catch(playErrorHandler);\n      }\n    } catch (err) {\n      playErrorHandler(err);\n    }\n  }\n\n  // assumes playlist is valid - don't call without checking\n  goToTrack(args) {\n    clearTimeout(this.delayTimeout);\n    this.setState(prevState => getGoToTrackState({ prevState, ...args }));\n  }\n\n  selectTrackIndex(index) {\n    const { playlist } = this.props;\n    if (!isPlaylistValid(playlist)) {\n      return;\n    }\n    if (index < 0 || index > playlist.length) {\n      logWarning(`Playlist index ${index} is out of bounds!`);\n      return;\n    }\n    if (this.state.shuffle) {\n      this.shuffler.pickNextItem(index, this.state.activeTrackIndex);\n    }\n    this.goToTrack({ index });\n  }\n\n  backSkip() {\n    const { playlist, stayOnBackSkipThreshold } = this.props;\n    const { media } = this;\n    const { cycle, activeTrackIndex, shuffle } = this.state;\n    if (\n      !isPlaylistValid(playlist) ||\n      media.currentTime >= stayOnBackSkipThreshold ||\n      (!cycle && activeTrackIndex < 1)\n    ) {\n      media.currentTime = 0;\n      return;\n    }\n    let index;\n    if (shuffle) {\n      const previousItem = this.shuffler.findPreviousItem(activeTrackIndex);\n      if (previousItem === undefined) {\n        // if we aren't allowing backShuffle then we'll hit a stopping point.\n        media.currentTime = 0;\n        return;\n      }\n      index = findTrackIndexByUrl(playlist, previousItem);\n    } else {\n      index = activeTrackIndex - 1;\n      if (index < 0) {\n        index = playlist.length - 1;\n      }\n    }\n    this.goToTrack({ index, shouldForceLoad: true });\n  }\n\n  forwardSkip() {\n    const { playlist } = this.props;\n    const { cycle, activeTrackIndex, shuffle } = this.state;\n    if (\n      !isPlaylistValid(playlist) ||\n      (!cycle && activeTrackIndex + 1 >= playlist.length)\n    ) {\n      return;\n    }\n    let index;\n    if (shuffle) {\n      index = findTrackIndexByUrl(\n        playlist,\n        this.shuffler.findNextItem(activeTrackIndex)\n      );\n    } else {\n      index = activeTrackIndex + 1;\n      if (index >= playlist.length) {\n        index = 0;\n      }\n    }\n    this.goToTrack({ index, shouldForceLoad: true });\n  }\n\n  seekPreview(targetTime) {\n    if (!isPlaylistValid(this.props.playlist)) {\n      return;\n    }\n    const baseStateUpdate = {\n      seekPreviewTime: targetTime,\n      seekInProgress: true\n    };\n    switch (this.props.seekMode) {\n      case 'paused':\n        this.setState(({ paused, awaitingResumeOnSeekComplete }) => ({\n          ...baseStateUpdate,\n          awaitingResumeOnSeekComplete: paused\n            ? awaitingResumeOnSeekComplete\n            : true\n        }));\n        this.media.currentTime = targetTime;\n        if (!this.state.paused) {\n          this.togglePause(true);\n        }\n        break;\n      case 'immediate':\n        this.setState(({ paused, awaitingResumeOnSeekComplete }) => ({\n          ...baseStateUpdate,\n          awaitingResumeOnSeekComplete: paused\n            ? awaitingResumeOnSeekComplete\n            : true\n        }));\n        this.media.currentTime = targetTime;\n        if (this.state.awaitingResumeOnSeekComplete && !this.media.ended) {\n          // if we earlier encountered an 'ended' state,\n          // un-pausing becomes necessary to resume playback\n          this.togglePause(false);\n        }\n        break;\n      case 'onrelease':\n        this.setState(baseStateUpdate);\n        break;\n    }\n  }\n\n  seekComplete(targetTime) {\n    const { seekPreviewTime, awaitingResumeOnSeekComplete } = this.state;\n    const baseStateUpdate = {\n      seekInProgress: false,\n      awaitingResumeOnSeekComplete: false\n    };\n    const currentTime =\n      typeof targetTime === 'number' ? targetTime : seekPreviewTime;\n\n    if (isNaN(currentTime)) {\n      this.setState(baseStateUpdate);\n      return;\n    }\n    this.setState({\n      ...baseStateUpdate,\n      /* we'll update currentTime on the media listener hook anyway,\n       * but that might not happen for a bit... so the optimistic update\n       * helps us avoid the progress bar jumping around and confusing the user.\n       * https://github.com/benwiley4000/cassette/issues/209\n       */\n      currentTime\n    });\n    this.media.currentTime = currentTime;\n    if (awaitingResumeOnSeekComplete) {\n      if (this.media.ended) {\n        this.forwardSkip();\n      } else {\n        this.togglePause(false);\n      }\n    }\n  }\n\n  setVolume(volume, inProgress = true) {\n    if (inProgress && !this.state.setVolumeInProgress) {\n      this.setState({\n        setVolumeInProgress: true\n      });\n    }\n    const volumeInBounds = convertToNumberWithinIntervalBounds(volume, 0, 1);\n    this.media.muted = volumeInBounds === 0 ? true : false;\n    this.media.volume = volumeInBounds;\n  }\n\n  setVolumeComplete(volume) {\n    if (typeof volume === 'number') {\n      this.setVolume(volume, false);\n    }\n    this.setState({\n      setVolumeInProgress: false\n    });\n    if (!this.media.muted) {\n      this.lastStableVolume = this.media.volume;\n    }\n  }\n\n  toggleMuted(value) {\n    const muted = typeof value === 'boolean' ? value : !this.state.muted;\n    this.media.muted = muted;\n    if (!muted) {\n      this.media.volume = this.lastStableVolume;\n    }\n  }\n\n  toggleShuffle(value) {\n    const shuffle = typeof value === 'boolean' ? value : !this.state.shuffle;\n    this.setState({ shuffle });\n  }\n\n  setRepeatStrategy(repeatStrategy) {\n    if (repeatStrategyOptions.indexOf(repeatStrategy) === -1) {\n      logWarning(\n        'repeatStrategy \"' +\n          repeatStrategy +\n          '\" is not one of: ' +\n          repeatStrategyOptions.split(', ') +\n          '.'\n      );\n      return;\n    }\n    switch (repeatStrategy) {\n      case 'track':\n        // state update is automatic\n        this.media.loop = true;\n        break;\n      case 'playlist':\n        this.setState({\n          loop: false,\n          cycle: true\n        });\n        this.media.loop = false;\n        break;\n      case 'none':\n        this.setState({\n          loop: false,\n          cycle: false\n        });\n        this.media.loop = false;\n        break;\n    }\n  }\n\n  setPlaybackRate(rate) {\n    this.media.playbackRate = rate;\n  }\n\n  getControlProps() {\n    const { props, state } = this;\n    const playerContext = {\n      playlist: props.playlist,\n      activeTrackIndex: state.activeTrackIndex,\n      trackLoading: state.trackLoading,\n      paused: state.paused,\n      currentTime: state.currentTime,\n      seekPreviewTime: state.seekPreviewTime,\n      seekInProgress: state.seekInProgress,\n      awaitingResumeOnSeekComplete: state.awaitingResumeOnSeekComplete,\n      duration: state.duration,\n      bufferedRanges: state.bufferedRanges,\n      playedRanges: state.playedRanges,\n      seekableRanges: state.seekableRanges,\n      volume: state.volume,\n      muted: state.muted,\n      shuffle: state.shuffle,\n      stalled: state.stalled,\n      playbackRate: state.playbackRate,\n      setVolumeInProgress: state.setVolumeInProgress,\n      repeatStrategy: getRepeatStrategy(state.loop, state.cycle),\n      registerVideoHostElement: this.registerVideoHostElement,\n      renderVideoIntoHostElement: this.renderVideoIntoHostElement,\n      unregisterVideoHostElement: this.unregisterVideoHostElement,\n      onTogglePause: this.togglePause,\n      onSelectTrackIndex: this.selectTrackIndex,\n      onBackSkip: this.backSkip,\n      onForwardSkip: this.forwardSkip,\n      onSeekPreview: this.seekPreview,\n      onSeekComplete: this.seekComplete,\n      onSetVolume: this.setVolume,\n      onSetVolumeComplete: this.setVolumeComplete,\n      onToggleMuted: this.toggleMuted,\n      onToggleShuffle: this.toggleShuffle,\n      onSetRepeatStrategy: this.setRepeatStrategy,\n      onSetPlaybackRate: this.setPlaybackRate\n    };\n    if (this.playerContext) {\n      // only update this.playerContext if something has changed\n      for (const key of Object.keys(this.playerContext)) {\n        if (playerContext[key] !== this.playerContext[key]) {\n          this.playerContext = playerContext;\n          break;\n        }\n      }\n    } else {\n      // first time - nothing to compare\n      this.playerContext = playerContext;\n    }\n    return this.playerContext;\n  }\n\n  render() {\n    const playerContext = this.getControlProps();\n    return (\n      <Fragment>\n        <div ref={elem => (this.mediaContainer = elem)} hidden />\n        <PlayerContext.Provider value={playerContext}>\n          {typeof this.props.children === 'function'\n            ? this.props.children(playerContext)\n            : this.props.children}\n        </PlayerContext.Provider>\n      </Fragment>\n    );\n  }\n}\n\nPlayerContextProvider.propTypes = {\n  playlist: PropTypes.arrayOf(PlayerPropTypes.track.isRequired).isRequired,\n  autoplay: PropTypes.bool.isRequired,\n  autoplayDelayInSeconds: PropTypes.number.isRequired,\n  gapLengthInSeconds: PropTypes.number.isRequired,\n  crossOrigin: PlayerPropTypes.crossOriginAttribute,\n  defaultVolume: PropTypes.number.isRequired,\n  defaultMuted: PropTypes.bool,\n  defaultRepeatStrategy: PlayerPropTypes.repeatStrategy.isRequired,\n  defaultShuffle: PropTypes.bool,\n  defaultPlaybackRate: PropTypes.number.isRequired,\n  startingTime: PropTypes.number.isRequired,\n  startingTrackIndex: PropTypes.number.isRequired,\n  loadFirstTrackOnPlaylistComplete: PropTypes.bool,\n  seekMode: PlayerPropTypes.seekMode.isRequired,\n  maintainPlaybackRate: PropTypes.bool.isRequired,\n  allowBackShuffle: PropTypes.bool,\n  stayOnBackSkipThreshold: PropTypes.number.isRequired,\n  supportedMediaSessionActions: PropTypes.arrayOf(\n    PlayerPropTypes.mediaSessionAction.isRequired\n  ).isRequired,\n  mediaSessionSeekLengthInSeconds: PropTypes.number.isRequired,\n  mediaElementRef: PropTypes.func,\n  initialStateSnapshot: PropTypes.shape({\n    __unstable__: PropTypes.object.isRequired\n  }),\n  onStateSnapshot: PropTypes.func,\n  onActiveTrackUpdate: PropTypes.func,\n  getPosterImageForTrack: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired\n};\n\nPlayerContextProvider.defaultProps = {\n  autoplay: false,\n  autoplayDelayInSeconds: 0,\n  gapLengthInSeconds: 0,\n  defaultVolume: 1,\n  defaultMuted: false,\n  defaultRepeatStrategy: 'playlist',\n  defaultShuffle: false,\n  defaultPlaybackRate: 1,\n  startingTime: 0,\n  startingTrackIndex: 0,\n  loadFirstTrackOnPlaylistComplete: true,\n  seekMode: 'immediate',\n  maintainPlaybackRate: false,\n  allowBackShuffle: false,\n  stayOnBackSkipThreshold: 5,\n  supportedMediaSessionActions: ['play', 'pause', 'previoustrack', 'nexttrack'],\n  mediaSessionSeekLengthInSeconds: 10,\n  getPosterImageForTrack(track) {\n    return track && track.artwork ? track.artwork[0].src : '';\n  }\n};\n\nexport class PlayerContextGroupMember extends Component {\n  componentDidMount() {\n    this.props.groupContext.registerMediaElement(this.mediaElement);\n  }\n\n  componentWillUnmount() {\n    this.props.groupContext.unregisterMediaElement(this.mediaElement);\n  }\n\n  render() {\n    const { groupContext, props } = this.props;\n    const { mediaElementRef, ...rest } = props;\n    return (\n      <PlayerContextProvider\n        {...groupContext.groupProps}\n        {...rest}\n        mediaElementRef={ref => {\n          if (mediaElementRef) {\n            mediaElementRef(ref);\n          }\n          this.mediaElement = ref;\n        }}\n      />\n    );\n  }\n}\n\nPlayerContextGroupMember.propTypes = {\n  groupContext: PropTypes.shape({\n    groupProps: PropTypes.object.isRequired,\n    registerMediaElement: PropTypes.func.isRequired,\n    unregisterMediaElement: PropTypes.func.isRequired\n  }).isRequired\n};\n\nfunction PlayerContextGroupConsumer(props) {\n  return (\n    <GroupContext.Consumer>\n      {groupContext => {\n        if (!groupContext) {\n          return createElement(PlayerContextProvider, props);\n        }\n        return createElement(PlayerContextGroupMember, {\n          groupContext,\n          props\n        });\n      }}\n    </GroupContext.Consumer>\n  );\n}\n\nexport default PlayerContextGroupConsumer;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport GroupContext from './GroupContext';\n\n/**\n * A wrapper which can be used to share configuration among multiple descendant [`PlayerContextProvider`](#playercontextprovider) instances as well as prevent multiple media elements from playing audio simultaneously\n */\nexport class PlayerContextGroup extends Component {\n  constructor(props) {\n    super(props);\n    this.registerMediaElement = this.registerMediaElement.bind(this);\n    this.unregisterMediaElement = this.unregisterMediaElement.bind(this);\n    this.enforceOneMediaSourceOnly = this.enforceOneMediaSourceOnly.bind(this);\n    this.mediaElements = [];\n  }\n\n  registerMediaElement(elem) {\n    this.mediaElements = this.mediaElements.concat(elem);\n    elem.addEventListener('play', this.enforceOneMediaSourceOnly, true);\n    elem.addEventListener('volumechange', this.enforceOneMediaSourceOnly, true);\n  }\n\n  unregisterMediaElement(elem) {\n    this.mediaElements = this.mediaElements.filter(element => elem !== element);\n    elem.removeEventListener('play', this.enforceOneMediaSourceOnly, true);\n    elem.removeEventListener(\n      'volumechange',\n      this.enforceOneMediaSourceOnly,\n      true\n    );\n  }\n\n  enforceOneMediaSourceOnly(e) {\n    const mediaElement = e.target;\n    const { paused, muted } = mediaElement;\n    if (paused || muted) {\n      return;\n    }\n    for (const element of this.mediaElements) {\n      if (element !== mediaElement && !element.muted) {\n        element.pause();\n      }\n    }\n  }\n\n  render() {\n    return (\n      <GroupContext.Consumer>\n        {groupContext => {\n          const value = groupContext\n            ? {\n                ...groupContext,\n                groupProps: { ...groupContext.groupProps, ...this.props }\n              }\n            : {\n                groupProps: this.props,\n                registerMediaElement: this.registerMediaElement,\n                unregisterMediaElement: this.unregisterMediaElement\n              };\n          return (\n            <GroupContext.Provider value={value}>\n              {this.props.children}\n            </GroupContext.Provider>\n          );\n        }}\n      </GroupContext.Consumer>\n    );\n  }\n}\n\nPlayerContextGroup.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport default PlayerContextGroup;\n","import createSingleGlobalContext from './utils/createSingleGlobalContext';\nimport { logWarning } from './utils/console';\n\nexport default createSingleGlobalContext('FullscreenContext', {\n  fullscreen: false,\n  requestFullscreen() {\n    logWarning(\n      'Fullscreen request ignored since there is no ' +\n        'FullscreenContextProvider ancestor.'\n    );\n  },\n  requestExitFullscreen() {\n    logWarning(\n      'Exit fullscreen request ignored since there is no ' +\n        'FullscreenContextProvider ancestor.'\n    );\n  }\n});\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport FullscreenContext from './FullscreenContext';\n\nconst fullscreenStyle = {\n  width: '100%',\n  height: '100%'\n};\n\n/**\n * Wraps an area which should be fullscreen-able\n */\nexport class FullscreenContextProvider extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fullscreen: false\n    };\n    this.requestFullscreen = this.requestFullscreen.bind(this);\n    this.requestExitFullscreen = this.requestExitFullscreen.bind(this);\n    this.handleFullscreenChange = this.handleFullscreenChange.bind(this);\n    this.fullscreenElement = null;\n  }\n\n  componentDidMount() {\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n    document.addEventListener(\n      'webkitfullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.addEventListener(\n      'mozfullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.addEventListener(\n      'msfullscreenchange',\n      this.handleFullscreenChange\n    );\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\n      'fullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.removeEventListener(\n      'webkitfullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.removeEventListener(\n      'mozfullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.removeEventListener(\n      'msfullscreenchange',\n      this.handleFullscreenChange\n    );\n  }\n\n  requestFullscreen() {\n    if (!this.props.fullscreenEnabled) {\n      return;\n    }\n    if (this.fullscreenElement.requestFullscreen) {\n      this.fullscreenElement.requestFullscreen();\n    } else if (this.fullscreenElement.webkitRequestFullscreen) {\n      this.fullscreenElement.webkitRequestFullscreen();\n    } else if (this.fullscreenElement.mozRequestFullscreen) {\n      this.fullscreenElement.mozRequestFullScreen();\n    } else if (this.fullscreenElement.msRequestFullscreen) {\n      this.fullscreenElement.msRequestFullscreen();\n    }\n  }\n\n  requestExitFullscreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    } else if (document.webkitCancelFullScreen) {\n      document.webkitCancelFullScreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.msExitFullscreen) {\n      document.mozExitFullscreen();\n    }\n  }\n\n  handleFullscreenChange() {\n    const documentFullscreenElement =\n      document.fullscreenElement ||\n      document.webkitFullscreenElement ||\n      document.mozFullScreenElement ||\n      document.msFullscreenElement;\n    this.setState({\n      fullscreen: documentFullscreenElement === this.fullscreenElement\n    });\n  }\n\n  getFullscreenContext() {\n    const fullscreenContext = {\n      fullscreen: this.state.fullscreen,\n      requestFullscreen: this.requestFullscreen,\n      requestExitFullscreen: this.requestExitFullscreen\n    };\n    if (\n      this.fullscreenContext &&\n      fullscreenContext.fullscreen === this.fullscreenContext.fullscreen\n    ) {\n      // no change\n      return this.fullscreenContext;\n    }\n    return (this.fullscreenContext = fullscreenContext);\n  }\n\n  render() {\n    const fullscreenContext = this.getFullscreenContext();\n    return (\n      <div\n        ref={elem => (this.fullscreenElement = elem)}\n        style={this.state.fullscreen ? fullscreenStyle : undefined}\n      >\n        <FullscreenContext.Provider value={fullscreenContext}>\n          {typeof this.props.children === 'function'\n            ? this.props.children(fullscreenContext)\n            : this.props.children}\n        </FullscreenContext.Provider>\n      </div>\n    );\n  }\n}\n\nFullscreenContextProvider.propTypes = {\n  fullscreenEnabled: PropTypes.bool.isRequired,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired\n};\n\nFullscreenContextProvider.defaultProps = {\n  fullscreenEnabled: true\n};\n\nexport default FullscreenContextProvider;\n","import React, { createElement } from 'react';\n\nimport PlayerContext from './PlayerContext';\nimport FullscreenContext from './FullscreenContext';\nimport { logWarning } from './utils/console';\n\nfunction playerContextFilter(component, contextPropNames) {\n  const warned = {};\n  const childName = component.displayName || component.name;\n  function PlayerContextFilter(props) {\n    return (\n      <FullscreenContext.Consumer>\n        {fullscreenContext => (\n          <PlayerContext.Consumer>\n            {playerContext => {\n              const childProps = { ...props };\n              for (const propName of contextPropNames) {\n                if (playerContext.hasOwnProperty(propName)) {\n                  childProps[propName] = playerContext[propName];\n                } else if (fullscreenContext.hasOwnProperty(propName)) {\n                  childProps[propName] = fullscreenContext[propName];\n                } else if (!warned[propName]) {\n                  logWarning(\n                    \"Prop '\" +\n                      propName +\n                      \"' for component \" +\n                      childName +\n                      ' not found in playerContext or fullscreenContext.'\n                  );\n                  warned[propName] = true;\n                }\n              }\n              return createElement(component, childProps);\n            }}\n          </PlayerContext.Consumer>\n        )}\n      </FullscreenContext.Consumer>\n    );\n  }\n  if (childName) {\n    PlayerContextFilter.displayName = `PlayerContextFilter(${childName})`;\n  }\n  return PlayerContextFilter;\n}\n\nexport default playerContextFilter;\n","import PlayerContextProvider from './PlayerContextProvider';\nimport PlayerContext from './PlayerContext';\nimport PlayerContextGroup from './PlayerContextGroup';\nimport FullscreenContextProvider from './FullscreenContextProvider';\nimport FullscreenContext from './FullscreenContext';\nimport playerContextFilter from './playerContextFilter';\nimport * as PlayerPropTypes from './PlayerPropTypes';\n\nexport { PlayerContextProvider };\nexport const PlayerContextConsumer = PlayerContext.Consumer;\nexport { PlayerContextGroup };\nexport { FullscreenContextProvider };\nexport const FullscreenContextConsumer = FullscreenContext.Consumer;\nexport { playerContextFilter };\nexport { PlayerPropTypes };\n\n// undocumented exports\nexport * from './utils/console';\nexport {\n  default as convertToNumberWithinIntervalBounds\n} from './utils/convertToNumberWithinIntervalBounds';\nexport { default as isPlaylistValid } from './utils/isPlaylistValid';\nexport { repeatStrategyOptions } from './constants';\n"],"sourceRoot":""}